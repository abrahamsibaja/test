version: "2"
services:
    caddy:
        image: abiosoft/caddy:latest
        environment: { ACME_AGREE: "true" }
        ports:
            - "80:80"
            - "443:443"
        environment:
            - CADDYPATH:/etc/caddycerts
        volumes:
            - ./Caddyfile:/etc/Caddyfile # to mount custom Caddyfile
            - ./caddy:/etc/caddycerts
networks:
    default:
        external:
            name: instance_default
    #     depends_on:
    #         - instance
    # instance:
    #     build: ./instance
    #     command: ./run.sh build && ./run.sh up
    #     ports:
    #         - "8041:8041"
    #     depends_on:
    #         - web
    # web:/
    #     build: .
